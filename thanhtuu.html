<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√†nh T·ª±u</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="config.js"></script>
</head>
<body>

    <div id="screen-ach" class="screen active">
        <div class="game-header">
            <a href="index.html" class="btn-icon" style="text-decoration: none; display:flex; justify-content:center; align-items:center;">‚¨Ö</a>
            <h2 style="margin:0">TH√ÄNH T·ª∞U</h2>
            <div style="width: 44px;"></div>
        </div>
        <div id="ach-list" class="ach-list">
            <div style="text-align: center; margin-top: 50px;">
                <div class="loader" style="margin: 0 auto;"></div>
                <p style="color: #94a3b8; margin-top: 10px;">ƒêang t·∫£i d·ªØ li·ªáu...</p>
            </div>
        </div>
    </div>

    <script>
        const user = checkLogin();
        
        // DANH S√ÅCH D·ª∞ PH√íNG (Tr√°nh l·ªói n·∫øu config.js ch∆∞a load k·ªãp)
        const FALLBACK_ACH = [
            { id: 'win1', title: 'T√¢n Binh', desc: 'Th·∫Øng tr·∫≠n ƒë·∫ßu ti√™n', stars: 1, icon: 'üê£' },
            { id: 'win10', title: 'Chuy√™n Gia', desc: 'Th·∫Øng 10 tr·∫≠n', stars: 2, icon: 'üí£' },
            { id: 'speed60', title: 'Th·∫ßn T·ªëc', desc: 'Th·∫Øng d∆∞·ªõi 60 gi√¢y', stars: 3, icon: '‚ö°' },
            { id: 'num5', title: 'T·ª≠ Th·∫ßn', desc: 'M·ªü √¥ s·ªë 5', stars: 2, icon: 'üíÄ' },
            { id: 'boss_slayer', title: 'D≈©ng Sƒ© Di·ªát Boss', desc: 'ƒê√°nh b·∫°i Boss', stars: 3, icon: 'üëπ' }
        ];

        // ∆Øu ti√™n l·∫•y t·ª´ config.js, n·∫øu kh√¥ng c√≥ th√¨ d√πng d·ª± ph√≤ng
        const ACHIEVEMENTS = (window.LIST_ACH && window.LIST_ACH.length > 0) ? window.LIST_ACH : FALLBACK_ACH;

        db.ref('users/' + user + '/achievements').once('value').then(snap => {
            const userAch = snap.val() || {}; 
            const listContainer = document.getElementById('ach-list');
            listContainer.innerHTML = ''; 

            ACHIEVEMENTS.forEach(ach => {
                const isUnlocked = userAch[ach.id] === true;
                const starStr = '‚≠ê'.repeat(ach.stars);
                
                listContainer.innerHTML += `
                    <div class="ach-item ${isUnlocked ? 'unlocked' : ''}">
                        <div class="ach-icon">${ach.icon}</div>
                        <div class="ach-content">
                            <div class="ach-title">${ach.title}</div>
                            <div style="color:#f59e0b; font-size:0.8rem; margin-bottom:2px">${starStr}</div>
                            <div class="ach-desc">${ach.desc}</div>
                        </div>
                        <div class="ach-status">
                            ${isUnlocked ? '‚úÖ' : 'üîí'}
                        </div>
                    </div>
                `;
            });
        });
    </script>
</body>
</html>
